name: windows-2019

on:
 push:
  branches: [ "main" ]
 pull_request:
  branches: [ "main" ]

jobs:

 build:

  strategy:
    matrix:
      configuration: [Debug, Release]

  runs-on: windows-2019

  env:
    Solution_Name: MathGPTProGenerator
    Test_Project_Path: MathGPTProGenerator\MathGPTProGenerator.csproj
    Wap_Project_Directory: your-wap-project-directory-name
    Wap_Project_Path: your-wap-project-path
    DOTNET_ROOT: C:\Program Files\dotnet

  steps:
  - name: Checkout
    uses: actions/checkout@v3
    with:
      fetch-depth: 0

  - name: Install .NET Core
    uses: actions/setup-dotnet@v3
    with:
      dotnet-version: 6.0.x

  - name: Setup MSBuild.exe
    uses: microsoft/setup-msbuild@v1.0.2

  - name: Restore the application
    run: msbuild $env:Solution_Name /t:Restore /p:Configuration=$env:Configuration
    env:
      Configuration: ${{ matrix.configuration }}

  - name: Build the application
    run: msbuild $env:Solution_Name /p:Configuration=$env:Configuration
    env:
      Configuration: ${{ matrix.configuration }}

  - name: Run the application
    run: dotnet run --project $env:Test_Project_Path
